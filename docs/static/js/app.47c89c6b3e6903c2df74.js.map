{"version":3,"sources":["webpack:///static/js/app.47c89c6b3e6903c2df74.js","webpack:///./src/main.js","webpack:///./src/App.vue","webpack:///./src/WebSocketClient.js","webpack:///./src/routes.js","webpack:///App.vue","webpack:///./src/App.vue?aa90"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_vue","_vue2","_App","_App2","_vueRouter","_vueRouter2","_routes","_routes2","_WebSocketClient","_WebSocketClient2","use","router","routes","webSocket","init","path","open","console","log","mixin","data","receiveMsg","created","_this","this","on","msg","$execute","type","methods","name","login","token","setHeader","send","app","el","render","h","beforeEach","to","from","next","matched","length","$router","replace","params","message","document","addEventListener","e","preventDefault","r","fastclick","attach","body","47","__vue_exports__","__vue_options__","__vue_template__","options","staticRenderFns","58","63","66","107","_stringify","_stringify2","_typeof2","_typeof3","_extends2","_extends3","sendMessageCache","messageCache","shift","sendMsg","connected","header","_ws","push","event","eventsArray","events","forEach","fn","window","WebSocket","onopen","_open","call","onmessage","_ref","JSON","parse","onclose","_close","close","onerror","error","opt","setTimeout","key","value","arguments","undefined","108","Object","defineProperty","component","__WEBPACK_AMD_REQUIRE_ARRAY__","apply","bind","109","Date","getTime","getParams","search","location","substr","pv","split","param","pvStr","p","beforeRouteEnter","vm","page","126","_vm","_h","attrs","id"],"mappings":"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","file":"static/js/app.47c89c6b3e6903c2df74.js","sourcesContent":["webpackJsonp([6,4],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _vue = __webpack_require__(69);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _App = __webpack_require__(47);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tvar _vueRouter = __webpack_require__(68);\n\t\n\tvar _vueRouter2 = _interopRequireDefault(_vueRouter);\n\t\n\tvar _routes = __webpack_require__(108);\n\t\n\tvar _routes2 = _interopRequireDefault(_routes);\n\t\n\tvar _WebSocketClient = __webpack_require__(107);\n\t\n\tvar _WebSocketClient2 = _interopRequireDefault(_WebSocketClient);\n\t\n\t__webpack_require__(58);\n\t\n\t__webpack_require__(66);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.use(_vueRouter2.default);\n\t\n\tvar router = new _vueRouter2.default({ routes: _routes2.default });\n\t\n\tvar webSocket = _WebSocketClient2.default.init({\n\t  path: 'ws://118.190.4.119:9001',\n\t  open: function open() {\n\t    console.log('open success');\n\t  }\n\t});\n\t\n\t_vue2.default.mixin({\n\t  data: function data() {\n\t    return {\n\t      receiveMsg: false\n\t    };\n\t  },\n\t  created: function created() {\n\t    var _this = this;\n\t\n\t    if (this.receiveMsg) {\n\t      webSocket.on('message', function (msg) {\n\t        _this.$execute(msg.type, msg);\n\t      });\n\t    }\n\t  },\n\t\n\t  methods: {\n\t    $execute: function $execute(name, data) {\n\t      if (typeof this[name] === 'function') {\n\t        this[name](data);\n\t      }\n\t    },\n\t    login: function login(token) {\n\t      webSocket.setHeader({ token: token });\n\t      this.send(token, 'login');\n\t    },\n\t    send: function send(msg, type) {\n\t      webSocket.send(msg, type);\n\t    }\n\t  }\n\t});\n\t\n\tvar app = new _vue2.default({\n\t  el: '#app',\n\t  router: router,\n\t  render: function render(h) {\n\t    return h(_App2.default);\n\t  }\n\t});\n\t\n\trouter.beforeEach(function (to, from, next) {\n\t  if (to.matched.length === 0) {\n\t    app.$router.replace({ name: 'no-page', params: { message: to.path } });\n\t  }\n\t  next();\n\t});\n\t\n\tdocument.addEventListener('touchmove', function (e) {\n\t  e.preventDefault();\n\t}, false);\n\t\n\t__webpack_require__.e/* nsure */(3, function (r) {\n\t  var fastclick = __webpack_require__(67);\n\t  fastclick.attach(document.body);\n\t});\n\n/***/ },\n\n/***/ 47:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(63)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(109)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(126)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n\n/***/ 58:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 63:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 66:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 107:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _stringify = __webpack_require__(101);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _typeof2 = __webpack_require__(106);\n\t\n\tvar _typeof3 = _interopRequireDefault(_typeof2);\n\t\n\tvar _extends2 = __webpack_require__(105);\n\t\n\tvar _extends3 = _interopRequireDefault(_extends2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.init = function (options) {\n\t  var _this = this;\n\t\n\t  var connected = false;\n\t  var events = {};\n\t  var messageCache = [];\n\t  var _ws = '';\n\t  var init = function init() {\n\t    _this._ws = new window.WebSocket(options.path);\n\t    _ws = _this._ws;\n\t    _this._ws.onopen = function (e) {\n\t      connected = true;\n\t      options._open();\n\t      options.open.call(_this, e);\n\t    };\n\t    _this._ws.onmessage = function (_ref) {\n\t      var data = _ref.data;\n\t\n\t      event('message', JSON.parse(data));\n\t    };\n\t    _this._ws.onclose = function (e) {\n\t      connected = false;\n\t      options._close();\n\t      options.close.call(_this, e);\n\t    };\n\t    _this._ws.onerror = function (e) {\n\t      options.error.call(_this, e);\n\t    };\n\t  };\n\t\n\t  var opt = {\n\t    open: function open() {},\n\t    _open: function _open() {\n\t      sendMessageCache();\n\t    },\n\t    _close: function _close() {\n\t      setTimeout(init, 5000);\n\t    },\n\t    close: function close() {},\n\t    message: function message() {},\n\t    error: function error() {},\n\t\n\t    header: {}\n\t  };\n\t  options = (0, _extends3.default)({}, opt, options);\n\t\n\t  this.setHeader = function (key, value) {\n\t    if ((typeof key === 'undefined' ? 'undefined' : (0, _typeof3.default)(key)) === 'object') {\n\t      options.header = (0, _extends3.default)({}, options.header, key);\n\t    } else {\n\t      options.header[key] = value;\n\t    }\n\t  };\n\t\n\t  this.send = function (data) {\n\t    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n\t\n\t    var msg = { data: data, type: type };\n\t    sendMsg(msg);\n\t  };\n\t\n\t  function sendMessageCache() {\n\t    if (messageCache.length) {\n\t      var msg = messageCache.shift();\n\t      sendMsg(msg);\n\t      sendMessageCache();\n\t    }\n\t  }\n\t\n\t  function sendMsg(msg) {\n\t    if (connected) {\n\t      msg.header = options.header;\n\t      _ws.send((0, _stringify2.default)(msg));\n\t    } else {\n\t      messageCache.push(msg);\n\t    }\n\t  }\n\t\n\t  this.on = function (name, fn) {\n\t    if (!events[name]) events[name] = [];\n\t    events[name].push(fn);\n\t  };\n\t\n\t  function event(name, data) {\n\t    var eventsArray = events[name];\n\t    eventsArray && eventsArray.forEach(function (fn) {\n\t      return fn(data);\n\t    });\n\t  }\n\t\n\t  init();\n\t  return this;\n\t};\n\n/***/ },\n\n/***/ 108:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _App = __webpack_require__(47);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = [{\n\t  path: '/',\n\t  component: _App2.default\n\t}, {\n\t  path: '/no-page/:message',\n\t  name: 'no-page',\n\t  component: function component(r) {\n\t    return __webpack_require__.e/* require */(2, function(__webpack_require__) { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(118)]; (r.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}.bind(this));\n\t  }\n\t}, {\n\t  path: '/room',\n\t  name: 'room',\n\t  component: function component(r) {\n\t    return __webpack_require__.e/* require */(1, function(__webpack_require__) { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(121)]; (r.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}.bind(this));\n\t  }\n\t}, {\n\t  path: '/begin',\n\t  name: 'begin',\n\t  component: function component(r) {\n\t    return __webpack_require__.e/* require */(0, function(__webpack_require__) { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(119)]; (r.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}.bind(this));\n\t  }\n\t}];\n\n/***/ },\n\n/***/ 109:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = {\n\t  name: 'app',\n\t  created: function created() {\n\t    var token = 'token_' + new Date().getTime();\n\t    this.login(token);\n\t  },\n\t\n\t  methods: {\n\t    getParams: function getParams() {\n\t      var search = window.location.search;\n\t      search = search && search.substr(1);\n\t      var pv = search.split('&');\n\t      var param = {};\n\t      pv.forEach(function (pvStr) {\n\t        var p = pvStr.split('=');\n\t        param[p[0]] = p[1];\n\t        return param;\n\t      });\n\t      return param;\n\t    }\n\t  },\n\t  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n\t    next(function (vm) {\n\t      var param = vm.getParams();\n\t      vm.$router.replace({ path: '/' + (param.page || 'room') });\n\t    });\n\t  }\n\t};\n\n/***/ },\n\n/***/ 126:\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;\n\t  return _vm._h('div', {\n\t    attrs: {\n\t      \"id\": \"app\"\n\t    }\n\t  }, [_vm._h('router-view')])\n\t},staticRenderFns: []}\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/app.47c89c6b3e6903c2df74.js","import Vue from 'vue'\nimport App from './App'\nimport VueRouter from 'vue-router'\nimport routes from './routes'\nimport WebSocketClient from './WebSocketClient'\nimport 'weui'\nimport './assets/animate.css'\n\nVue.use(VueRouter)\n\nconst router = new VueRouter({ routes })\n\nconst webSocket = WebSocketClient.init({\n  path: 'ws://118.190.4.119:9001',\n  open () {\n    console.log('open success')\n  }\n})\n\nVue.mixin({\n  data () {\n    return {\n      receiveMsg: false\n    }\n  },\n  created () {\n    if (this.receiveMsg) {\n      webSocket.on('message', msg => {\n        this.$execute(msg.type, msg)\n      })\n    }\n  },\n  methods: {\n    $execute (name, data) {\n      if (typeof this[name] === 'function') {\n        this[name](data)\n      }\n    },\n    login (token) {\n      webSocket.setHeader({token})\n      this.send(token, 'login')\n    },\n    send (msg, type) {\n      webSocket.send(msg, type)\n    }\n  }\n})\n\n/* eslint-disable no-new */\nconst app = new Vue({\n  el: '#app',\n  router,\n  render: h => h(App)\n})\n\nrouter.beforeEach((to, from, next) => {\n  if (to.matched.length === 0) {\n    app.$router.replace({ name: 'no-page', params: {message: to.path} })\n  }\n  next()\n})\n\ndocument.addEventListener('touchmove', e => {\n  e.preventDefault()\n}, false)\n\nrequire.ensure([], r => {\n  let fastclick = require('fastclick')\n  fastclick.attach(document.body)\n}, 'fastclick')\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../node_modules/.1.0.1@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-28155561!vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./App.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-28155561!vue-loader/lib/template-loader?raw&engine=jade!vue-loader/lib/selector?type=template&index=0!./App.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 47\n// module chunks = 6","exports.init = function (options) {\n  let connected = false\n  let events = {}\n  let messageCache = []\n  let _ws = ''\n  const init = () => {\n    this._ws = new window.WebSocket(options.path)\n    _ws = this._ws\n    this._ws.onopen = (e) => {\n      connected = true\n      options._open()\n      options.open.call(this, e)\n    }\n    this._ws.onmessage = ({ data }) => {\n      event('message', JSON.parse(data))\n    }\n    this._ws.onclose = (e) => {\n      connected = false\n      options._close()\n      options.close.call(this, e)\n    }\n    this._ws.onerror = (e) => {\n      options.error.call(this, e)\n    }\n  }\n\n  const opt = {\n    open () {},\n    _open () { sendMessageCache() },\n    _close () {\n      setTimeout(init, 5000)\n    },\n    close () {},\n    message () {},\n    error () {},\n    header: {}\n  }\n  options = {...opt, ...options}\n\n  this.setHeader = (key, value) => {\n    if (typeof key === 'object') {\n      options.header = {...options.header, ...key}\n    } else {\n      options.header[key] = value\n    }\n  }\n\n  this.send = (data, type = -1) => {\n    let msg = {data, type}\n    sendMsg(msg)\n  }\n\n  function sendMessageCache () {\n    if (messageCache.length) {\n      let msg = messageCache.shift()\n      sendMsg(msg)\n      sendMessageCache()\n    }\n  }\n\n  function sendMsg (msg) {\n    if (connected) {\n      msg.header = options.header\n      _ws.send(JSON.stringify(msg))\n    } else {\n      messageCache.push(msg)\n    }\n  }\n\n  this.on = (name, fn) => {\n    if (!events[name]) events[name] = []\n    events[name].push(fn)\n  }\n\n  function event (name, data) {\n    let eventsArray = events[name]\n    eventsArray && eventsArray.forEach(fn => fn(data))\n  }\n\n  init()\n  return this\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/WebSocketClient.js","import App from './App'\r\nexport default [\r\n  {\r\n    path: '/',\r\n    component: App\r\n  },\r\n  {\r\n    path: '/no-page/:message',\r\n    name: 'no-page',\r\n    component: r => require(['src/views/no-page.vue'], r)\r\n  },\r\n  {\r\n    path: '/room',\r\n    name: 'room',\r\n    component: r => require(['src/views/play/room.vue'], r)\r\n  },\r\n  {\r\n    path: '/begin',\r\n    name: 'begin',\r\n    component: r => require(['src/views/play/begin.vue'], r)\r\n  }\r\n]\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes.js","<template lang=\"jade\">\n  div#app\n    router-view\n</template>\n\n<script>\nexport default {\n  name: 'app',\n  created () {\n    let token = 'token_' + new Date().getTime()\n    this.login(token)\n  },\n  methods: {\n    getParams () {\n      let search = window.location.search\n      search = search && search.substr(1)\n      let pv = search.split('&')\n      let param = {}\n      pv.forEach(pvStr => {\n        let p = pvStr.split('=')\n        param[p[0]] = p[1]\n        return param\n      })\n      return param\n    }\n  },\n  beforeRouteEnter (to, from, next) {\n    next(vm => {\n      let param = vm.getParams()\n      vm.$router.replace({path: '/' + (param.page || 'room')})\n    })\n  }\n}\n</script>\n\n<style>\n*{\n  box-sizing: border-box;\n}\nbody,html,#app{\n  background: #f8f8f8;\n  height: 100%;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?19c10acc","module.exports={render:function (){var _vm=this;\n  return _vm._h('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_vm._h('router-view')])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.9.9.0@vue-loader/lib/template-compiler.js?id=data-v-28155561!./~/.9.9.0@vue-loader/lib/template-loader.js?raw&engine=jade!./~/.9.9.0@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 126\n// module chunks = 6"],"sourceRoot":""}